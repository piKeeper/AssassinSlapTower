-- Teleport loop
task.spawn(function()
	while scriptRunning do
		if teleporting then
			local localChar = localPlr.Character
			if localChar then
				local localHRP = localChar:FindFirstChild("HumanoidRootPart")

				if localHRP then
					if activeTarget then
						local targetChar = activeTarget.Character
						local targetHRP = targetChar and targetChar:FindFirstChild("HumanoidRootPart")

						if targetHRP then
							-- teleport to target
							localHRP.CFrame = CFrame.new(targetHRP.Position)

							-- auto-equip Slapper tool if it's in Backpack
							local slapper = localChar:FindFirstChild("Slapper") or localPlr.Backpack:FindFirstChild("Slapper")
							if slapper and slapper:IsA("Tool") then
								if slapper.Parent == localPlr.Backpack then
									slapper.Parent = localChar -- equips tool
								end
								slapper:Activate()
							end

							-- claim bounty
							AssassinClaimedBounty:FireServer()
						end
					else
						-- No target â†’ teleport to random safe location
						local randomX = math.random(-2000, 2000)
						local randomY = math.random(1000, 3000)
						local randomZ = math.random(-2000, 2000)
						localHRP.CFrame = CFrame.new(randomX, randomY, randomZ)
					end
				end
			end
		end
		task.wait(0.1)
	end
end)
